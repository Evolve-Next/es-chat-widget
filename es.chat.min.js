const doc=document,xmlns="http://www.w3.org/2000/svg",qSA=t=>doc.querySelectorAll(t),$=t=>{const s=qSA(t);return s.length>1?s:1===s.length?s[0]:void 0},cEL=t=>doc.createElement(t),cElNS=(t,s)=>doc.createElementNS(t,s),ESChatScript=$('script[src*="es.chat"]'),queryString=ESChatScript.src.replace(/^[^\?]+\??/,""),searchParams=new URLSearchParams(queryString),token=searchParams.get("t")?searchParams.get("t"):searchParams.get("token");class ESChat{constructor(t){this.head=$("head"),this.body=$("body"),this.t=t,this.init()}async init(){const t = await fetch('/static/api.json', { method: 'GET', headers: { h: this.t } });if(t.ok){const s=await t.json();s.success?(this.o=s.payload,this.m(),this.u(),this.L(),this.C()):console.error(s.message)}else console.error("something went wrong")}m(){const t=cEL("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href","https://fonts.googleapis.com/css?family=Roboto:400,500,600"),this.head.appendChild(t)}u(){const t=cEL("link");t.setAttribute('rel', 'stylesheet'), t.setAttribute('type', 'text/css'), t.setAttribute('href', 'https://cdn.jsdelivr.net/npm/es-chat-widget/es.chat.min.css'), this.head.appendChild(t);}L(){this.B=cEL("div"),this.B.className="es-chat-container",this.S(),this.p()}g(){this.v(),this.k(),this.body.appendChild(this.B)}S(){this.P=cEL("button"),this.P.className="es-chat-iconButton",this.P.type="button",this.P.ariaLabel="Chat With Us",this.P.tabIndex="0",this.j()}v(){this.B.prepend(this.P),this.A()}D(){const t=$(".chat-box"),s=$(".chat-cloud"),i=t.classList,h=s.classList;i.contains("show")?i.remove("show"):i.add("show"),setTimeout(()=>{h.contains("show")?h.remove("show"):h.add("show")},0)}j(){this.H=cElNS(xmlns,"svg"),this.H.setAttributeNS(null,"viewBox","0 0 24 24"),this.$()}A(){this.P.appendChild(this.H),this.q()}$(){this.N=cElNS(xmlns,"path"),this.N.setAttributeNS(null,"d","M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"),this.N.setAttributeNS(null,"fill",this.o.colors.primary)}q(){this.H.appendChild(this.N)}p(){this.O=cEL("div"),this.O.classList.add("chat-box"),this.R(),this.T(),this.W()}k(){this.F(),this.I(),this.U(),this.B.prepend(this.O)}R(){this.Y=cEL("div"),this.Y.style.backgroundColor=this.o.colors.secondary,this.Y.classList.add("header"),this.G(),this.X()}F(){this.O.append(this.Y),this.J(),this.K()}G(){this.Z=cEL("div"),this.tt=cEL("img"),this.st=cEL("span"),this.Z.classList.add("avatar"),this.st.classList.add("status"),this.tt.src=this.o.businessLogo,this.tt.alt="DP",this.tt.loading="lazy",this.tt.height=38,this.tt.width=38,this.st.style.backgroundColor=this.o.colors.status[this.o.businessStatus]}J(){this.Z.append(this.tt),this.Z.append(this.st),this.Y.append(this.Z)}X(){this.et=cEL("div"),this.ot=cEL("h5"),this.ct=cEL("h6"),this.et.classList.add("right"),this.ot.classList.add("name"),this.ct.classList.add("desc"),this.ot.style.color=this.o.colors.foreGround,this.ct.style.color=this.o.colors.foreGround,this.ot.innerHTML=this.o.businessName,this.ct.innerHTML=this.o.statusText}K(){this.et.append(this.ot),this.et.append(this.ct),this.Y.append(this.et)}T(){this.lt=cEL("div"),this.dt=cEL("div"),this.Et=cEL("div"),this.ut=cEL("h5"),this.Lt=cEL("h6"),this.ft=cEL("h6"),this.lt.style.backgroundColor="#E2D7CD",this.ut.innerHTML=this.o.businessName,this.Lt.innerHTML=this.o.welcomeMessage.replaceAll(/(?:\r\n|\r|\n)/g,"<br />"),this.lt.classList.add("body"),this.dt.classList.add("chat-cloud"),this.Et.classList.add("content"),this.ut.classList.add("sender"),this.Lt.classList.add("message"),this.ft.classList.add("time")}I(){this.Et.append(this.ut),this.Et.append(this.Lt),this.Et.append(this.ft),this.dt.append(this.Et),this.lt.append(this.dt),this.O.append(this.lt)}W(){this.Bt=cEL("div"),this.xt=cEL("a"),this.wt=cElNS(xmlns,"svg"),this.St=cElNS(xmlns,"path"),this.gt=cEL("span"),this.vt=cEL("p"),this.wt.setAttributeNS(null,"viewBox","0 0 24 24"),this.St.setAttributeNS(null,"d","M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"),this.St.setAttributeNS(null,"fill",this.o.colors.foreGround),this.gt.innerHTML=this.o.buttonLabel,this.xt.style.backgroundColor=this.o.colors.primary,this.vt.innerHTML=`POWERED BY <a href="${this.o.buttonLink}" target="_blank">EASYSOCIAL.IO</a>`,this.Bt.classList.add("footer"),this.xt.classList.add("start-button"),this.xt.setAttribute("href","https://wa.me/917229970970?text=Hello"),this.xt.setAttribute("target","_blank"),this.gt.classList.add("label"),this.vt.classList.add("powered-by")}U(){this.wt.append(this.St),this.xt.append(this.wt),this.xt.append(this.gt),this.Bt.append(this.xt),this.Bt.append(this.vt),this.O.append(this.Bt)}C(){this.P.addEventListener("click",()=>{$(".chat-cloud .time").innerHTML=this.time=(new Date).toLocaleString([],{hour:"numeric",minute:"2-digit",hour12:!0}),this.D()}),this.xt.addEventListener("click",this.D),this.g()}}token?new ESChat(token):(console.error("A valid token is required"),console.info('Provide token either in "t" or "token"'));